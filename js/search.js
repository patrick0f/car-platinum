/* 
let acura = ["ilx", "integra", "mdx", "nsx", "rdx", "tlx"];
let audi = [
  "a1",
  "a3",
  "a4",
  "a4-allroad-quattro",
  "a5",
  "a6",
  "a6-allroad-quattro",
  "a7",
  "a8",
  "a8-long",
  "e-tron",
  "e-tron-gt",
  "q2",
  "q3",
  "q4",
  "q5",
  "q5",
  "q5-sporthack",
  "q7",
  "q8",
  "r8",
  "tt"
];
let bentley = ["bentayga", "continental-gt"];
let bmw = [
  "i3",
  "i4",
  "i7",
  "i8",
  "ix",
  "ix1",
  "ix3",
  "series-1",
  "series-2",
  "series-2-active-tourer",
  "series-2-grand-tourer",
  "series-3",
  "series-4",
  "series-5",
  "series-6",
  "series-7",
  "series-8",
  "x1",
  "x2",
  "x2",
  "x3",
  "x4",
  "x5",
  "x6",
  "x7",
  "z4"
];
let bugatti = ["chiron"];
let buick = ["enclave", "encore-gx", "regal"];
let cadillac = [
  "ct4",
  "ct5",
  "ct6",
  "cts",
  "escalade",
  "escalade",
  "lyriq",
  "xt4",
  "xt5",
  "xt6"
];
let chevrolet = [
  "aveo",
  "blazer",
  "bolt",
  "camaro",
  "captiva",
  "colorado",
  "corvette",
  "cruze",
  "equinox",
  "groove",
  "impala",
  "silverado",
  "spark",
  "trailblazer",
  "traverse",
  "trax"
];
let chrysler = ["300", "pacifica", "voyager"];
let dodge = ["challenger", "charger", "durango", "hornet"];
let fiat = [
  "124-spider",
  "500",
  "500l",
  "500l-wagon",
  "500x",
  "doblo",
  "doblo-cargo",
  "ducato",
  "e-ulysse",
  "fiorino",
  "fullback",
  "panda",
  "pulse",
  "punto",
  "qubo",
  "scudo",
  "talento",
  "tipo",
  "toro"
];
let ford = [
  "b-max",
  "bronco",
  "c-max",
  "ecosport",
  "edge",
  "escape",
  "everest",
  "expedition",
  "explorer",
  "f-150",
  "f-250",
  "f-250-super-duty",
  "fiesta",
  "focus",
  "galaxy",
  "grand-tourneo-connect",
  "gt",
  "ka",
  "kuga",
  "mondeo",
  "mustang",
  "puma",
  "ranger",
  "s-max",
  "tourneo",
  "tourneo-connect",
  "tourneo-courier",
  "tourneo-custom",
  "transit",
  "transit-connect",
  "transit-courier",
  "transit-custom"
];
let gmc = ["savana", "yukon"];
let honda = [
  "accord",
  "city",
  "civic",
  "clarity",
  "cr-v",
  "honda-e",
  "hr-v",
  "insight",
  "jazz",
  "nsx",
  "odyssey",
  "passport",
  "pilot",
  "ridgeline"
];
let hyundai = [
  "accent",
  "bayon",
  "creta",
  "elantra",
  "genesis",
  "h-1",
  "h350",
  "i10",
  "i20",
  "i30",
  "i40",
  "ioniq",
  "ioniq-5",
  "ioniq-6",
  "ix20",
  "kona",
  "nexo",
  "palisade",
  "santa-fe",
  "sonata",
  "starex",
  "staria",
  "tucson",
  "veloster",
  "venue"
];
let jeep = [
  "avenger",
  "cherokee",
  "compass",
  "gladiator",
  "grand-cherokee",
  "grand-wagoneer",
  "renegade",
  "wrangler"
];
let kia = [
  "cadenza",
  "carens",
  "carnival",
  "ceed",
  "cerato",
  "ev6",
  "forte",
  "k5",
  "k900",
  "niro",
  "optima",
  "pegas",
  "picanto",
  "proceed",
  "rio",
  "sedona",
  "seltos",
  "sorento",
  "soul",
  "sportage",
  "stinger",
  "stonic",
  "telluride",
  "venga",
  "xceed"
];
let lamborghini = ["aventador", "countach", "huracan", "sian", "urus"];
let lexus = [
  "ct",
  "es",
  "gs",
  "gx",
  "is",
  "lc",
  "ls",
  "lx",
  "nx",
  "rc",
  "rx",
  "rz",
  "ux"
];
let maserati = ["ghibli", "grecale", "levante", "mc20", "quattroporte"];
let mazda = [
  "cx-3",
  "cx-30",
  "cx-5",
  "cx-50",
  "cx-60",
  "cx-9",
  "mazda2",
  "mazda3",
  "mazda6",
  "mx-30",
  "mx-5"
];
let mercedes = [
  "a-class",
  "amg-gt",
  "amg-sl",
  "b-class",
  "c-class",
  "citan",
  "cla",
  "cls",
  "e-class",
  "eqa",
  "eqb",
  "eqc",
  "eqe",
  "eqs",
  "eqs-suv",
  "g-class",
  "gla-class",
  "glb-class",
  "glc-class",
  "glc-coupe",
  "gle",
  "gle-class-coupe",
  "gls",
  "marco-polo",
  "s-class",
  "sl-class",
  "slc-class",
  "sprinter",
  "t-class",
  "v-class",
  "v-class-eqv",
  "vito",
  "x-class"
];
let mitsubishi = [
  "asx",
  "attrage",
  "eclipse-cross",
  "express",
  "i",
  "l200",
  "l200-triton-sport",
  "lancer-evolution",
  "mirage",
  "montero",
  "outlander",
  "pajero",
  "pajero-sport",
  "shogun",
  "space-star"
];
let nissan = [
  "370z",
  "altima",
  "ariya",
  "armada",
  "frontier",
  "gt-r",
  "interstar",
  "juke",
  "kicks",
  "leaf",
  "maxima",
  "micra",
  "murano",
  "navara",
  "note",
  "nt400",
  "nv200",
  "nv250",
  "nv300",
  "nv400",
  "patrol",
  "primastar",
  "pulsar",
  "qashqai",
  "rogue",
  "rouge-sport",
  "sakura",
  "sentra",
  "sunnny",
  "townstar",
  "versa",
  "x-terra",
  "x-trail",
  "z"
];
let porsche = [
  "718",
  "911",
  "cayenne",
  "cayenne-coupe",
  "macan",
  "panamera",
  "taycan"
];
let ram = ["1000", "promaster"];
let rollsroyce = ["cullinan", "dawn", "ghost", "phantom", "wraith"];
let subaru = [
  "ascent",
  "brz",
  "crosstrek",
  "forester",
  "impreza",
  "legacy",
  "levorg",
  "outback",
  "solterra",
  "wrx",
  "xv"
];
let tesla = ["model-3", "model-s", "model-x", "model-y", "roadster"];
let toyota = [
  "4runner",
  "auris",
  "avalon",
  "avanza",
  "avensis",
  "aygo",
  "aygo-x",
  "bz4x",
  "c-hr",
  "camry",
  "corolla",
  "corolla-cross",
  "crown",
  "fortuner",
  "gr86",
  "highlander",
  "hilux",
  "landcruiser",
  "mirai",
  "prado",
  "previa",
  "prius",
  "prius-prime",
  "priusplus",
  "proace",
  "proace-city",
  "proace-verso",
  "rav4",
  "sequoia",
  "sienna",
  "supra",
  "tundra",
  "veloz",
  "venza",
  "verso",
  "yaris",
  "yaris-cross"
];
let volkswagen = [
  "amarok",
  "arteon",
  "atlas",
  "beetle",
  "caddy",
  "california",
  "caravelle",
  "crafter",
  "golf",
  "golf-sportsvan",
  "grand-california",
  "id-buzz",
  "id3",
  "id4",
  "id5",
  "id6",
  "jetta",
  "multivan",
  "passat",
  "poko",
  "sharan",
  "t-cross",
  "t-roc",
  "taigo",
  "taos",
  "teramont",
  "tiguan",
  "tiguan-allspace",
  "touareg",
  "touran",
  "transporter",
  "up"
];
let volvo = [
  "c40",
  "s60",
  "s80",
  "s90",
  "v40",
  "v40-cross-country",
  "v60",
  "v60-cross-country",
  "v90",
  "v90-cross-country",
  "xc40",
  "xc60",
  "xc90"
];
 */
let carsObject = {
  acura: ["ilx", "integra", "mdx", "nsx", "rdx", "tlx"],
  audi: [
    "a1",
    "a3",
    "a4",
    "a4-allroad-quattro",
    "a5",
    "a6",
    "a6-allroad-quattro",
    "a7",
    "a8",
    "a8-long",
    "e-tron",
    "e-tron-gt",
    "q2",
    "q3",
    "q4",
    "q5",
    "q5",
    "q5-sporthack",
    "q7",
    "q8",
    "r8",
    "tt"
  ],
  bentley: ["bentayga", "continental-gt"],
  bmw: [
    "i3",
    "i4",
    "i7",
    "i8",
    "ix",
    "ix1",
    "ix3",
    "series-1",
    "series-2",
    "series-2-active-tourer",
    "series-2-grand-tourer",
    "series-3",
    "series-4",
    "series-5",
    "series-6",
    "series-7",
    "series-8",
    "x1",
    "x2",
    "x2",
    "x3",
    "x4",
    "x5",
    "x6",
    "x7",
    "z4"
  ],
  bugatti: ["chiron"],
  buick: ["enclave", "encore-gx", "regal"],
  cadillac: [
    "ct4",
    "ct5",
    "ct6",
    "cts",
    "escalade",
    "escalade",
    "lyriq",
    "xt4",
    "xt5",
    "xt6"
  ],
  chevrolet: [
    "aveo",
    "blazer",
    "bolt",
    "camaro",
    "captiva",
    "colorado",
    "corvette",
    "cruze",
    "equinox",
    "groove",
    "impala",
    "silverado",
    "spark",
    "trailblazer",
    "traverse",
    "trax"
  ],
  chrysler: ["300", "pacifica", "voyager"],
  dodge: ["challenger", "charger", "durango", "hornet"],
  fiat: [
    "124-spider",
    "500",
    "500l",
    "500l-wagon",
    "500x",
    "doblo",
    "doblo-cargo",
    "ducato",
    "e-ulysse",
    "fiorino",
    "fullback",
    "panda",
    "pulse",
    "punto",
    "qubo",
    "scudo",
    "talento",
    "tipo",
    "toro"
  ],
  ford: [
    "b-max",
    "bronco",
    "c-max",
    "ecosport",
    "edge",
    "escape",
    "everest",
    "expedition",
    "explorer",
    "f-150",
    "f-250",
    "f-250-super-duty",
    "fiesta",
    "focus",
    "galaxy",
    "grand-tourneo-connect",
    "gt",
    "ka",
    "kuga",
    "mondeo",
    "mustang",
    "puma",
    "ranger",
    "s-max",
    "tourneo",
    "tourneo-connect",
    "tourneo-courier",
    "tourneo-custom",
    "transit",
    "transit-connect",
    "transit-courier",
    "transit-custom"
  ],
  gmc: ["savana", "yukon"],
  honda: [
    "accord",
    "city",
    "civic",
    "clarity",
    "cr-v",
    "honda-e",
    "hr-v",
    "insight",
    "jazz",
    "nsx",
    "odyssey",
    "passport",
    "pilot",
    "ridgeline"
  ],
  hyundai: [
    "accent",
    "bayon",
    "creta",
    "elantra",
    "genesis",
    "h-1",
    "h350",
    "i10",
    "i20",
    "i30",
    "i40",
    "ioniq",
    "ioniq-5",
    "ioniq-6",
    "ix20",
    "kona",
    "nexo",
    "palisade",
    "santa-fe",
    "sonata",
    "starex",
    "staria",
    "tucson",
    "veloster",
    "venue"
  ],
  jeep: [
    "avenger",
    "cherokee",
    "compass",
    "gladiator",
    "grand-cherokee",
    "grand-wagoneer",
    "renegade",
    "wrangler"
  ],
  kia: [
    "cadenza",
    "carens",
    "carnival",
    "ceed",
    "cerato",
    "ev6",
    "forte",
    "k5",
    "k900",
    "niro",
    "optima",
    "pegas",
    "picanto",
    "proceed",
    "rio",
    "sedona",
    "seltos",
    "sorento",
    "soul",
    "sportage",
    "stinger",
    "stonic",
    "telluride",
    "venga",
    "xceed"
  ],
  lamborghini: ["aventador", "countach", "huracan", "sian", "urus"],
  lexus: [
    "ct",
    "es",
    "gs",
    "gx",
    "is",
    "lc",
    "ls",
    "lx",
    "nx",
    "rc",
    "rx",
    "rz",
    "ux"
  ],
  maserati: ["ghibli", "grecale", "levante", "mc20", "quattroporte"],
  mazda: [
    "cx-3",
    "cx-30",
    "cx-5",
    "cx-50",
    "cx-60",
    "cx-9",
    "mazda2",
    "mazda3",
    "mazda6",
    "mx-30",
    "mx-5"
  ],
  mercedes: [
    "a-class",
    "amg-gt",
    "amg-sl",
    "b-class",
    "c-class",
    "citan",
    "cla",
    "cls",
    "e-class",
    "eqa",
    "eqb",
    "eqc",
    "eqe",
    "eqs",
    "eqs-suv",
    "g-class",
    "gla-class",
    "glb-class",
    "glc-class",
    "glc-coupe",
    "gle",
    "gle-class-coupe",
    "gls",
    "marco-polo",
    "s-class",
    "sl-class",
    "slc-class",
    "sprinter",
    "t-class",
    "v-class",
    "v-class-eqv",
    "vito",
    "x-class"
  ],
  mitsubishi: [
    "asx",
    "attrage",
    "eclipse-cross",
    "express",
    "i",
    "l200",
    "l200-triton-sport",
    "lancer-evolution",
    "mirage",
    "montero",
    "outlander",
    "pajero",
    "pajero-sport",
    "shogun",
    "space-star"
  ],
  nissan: [
    "370z",
    "altima",
    "ariya",
    "armada",
    "frontier",
    "gt-r",
    "interstar",
    "juke",
    "kicks",
    "leaf",
    "maxima",
    "micra",
    "murano",
    "navara",
    "note",
    "nt400",
    "nv200",
    "nv250",
    "nv300",
    "nv400",
    "patrol",
    "primastar",
    "pulsar",
    "qashqai",
    "rogue",
    "rouge-sport",
    "sakura",
    "sentra",
    "sunnny",
    "townstar",
    "versa",
    "x-terra",
    "x-trail",
    "z"
  ],
  porsche: [
    "718",
    "911",
    "cayenne",
    "cayenne-coupe",
    "macan",
    "panamera",
    "taycan"
  ],
  ram: ["1000", "promaster"],
  rollsroyce: ["cullinan", "dawn", "ghost", "phantom", "wraith"],
  subaru: [
    "ascent",
    "brz",
    "crosstrek",
    "forester",
    "impreza",
    "legacy",
    "levorg",
    "outback",
    "solterra",
    "wrx",
    "xv"
  ],
  tesla: ["model-3", "model-s", "model-x", "model-y", "roadster"],
  toyota: [
    "4runner",
    "auris",
    "avalon",
    "avanza",
    "avensis",
    "aygo",
    "aygo-x",
    "bz4x",
    "c-hr",
    "camry",
    "corolla",
    "corolla-cross",
    "crown",
    "fortuner",
    "gr86",
    "highlander",
    "hilux",
    "landcruiser",
    "mirai",
    "prado",
    "previa",
    "prius",
    "prius-prime",
    "priusplus",
    "proace",
    "proace-city",
    "proace-verso",
    "rav4",
    "sequoia",
    "sienna",
    "supra",
    "tundra",
    "veloz",
    "venza",
    "verso",
    "yaris",
    "yaris-cross"
  ],
  volkswagen: [
    "amarok",
    "arteon",
    "atlas",
    "beetle",
    "caddy",
    "california",
    "caravelle",
    "crafter",
    "golf",
    "golf-sportsvan",
    "grand-california",
    "id-buzz",
    "id3",
    "id4",
    "id5",
    "id6",
    "jetta",
    "multivan",
    "passat",
    "poko",
    "sharan",
    "t-cross",
    "t-roc",
    "taigo",
    "taos",
    "teramont",
    "tiguan",
    "tiguan-allspace",
    "touareg",
    "touran",
    "transporter",
    "up"
  ],
  volvo: [
    "c40",
    "s60",
    "s80",
    "s90",
    "v40",
    "v40-cross-country",
    "v60",
    "v60-cross-country",
    "v90",
    "v90-cross-country",
    "xc40",
    "xc60",
    "xc90"
  ]
};
let carmake = document.querySelector("#carmake");
let carmodel = document.querySelector("#carmodel");
let caryear = document.querySelector("#selectyear");
let searchSection = document.querySelector("#search");
let searchBtn = document.querySelector("#searchBtn");
let search = document.querySelector("#searchFetch");
let outputdiv = document.querySelector("#output");
let output = document.querySelector("#caroutput");
let title = document.querySelector("#title");
let body = document.querySelector("#body");
let cylinders = document.querySelector("#cylinders");
let drive = document.querySelector("#drive");
let fuel = document.querySelector("#fuel");
let mpg = document.querySelector("#mpg");
let transmission = document.querySelector("#transmission");
let soldOut = document.querySelector("#soldOut");
let icons = document.querySelector("#icon-container");
let loadingdiv = document.querySelector("#loadingdiv");

let hideElements = function () {
  document.querySelector("#search").classList.add("hidden");
  document.querySelector("#content").style.maxHeight = null;
  document.querySelector("#loan").classList.add("hidden");
};

let intOption = "";
carsObject["acura"].forEach((item) => {
  intOption += `<option value='${item}'>${item}</option>`;
});
carmodel.innerHTML += intOption;

carmake.addEventListener("change", () => {
  let options = "";
  while (carmodel.options.length > 0) {
    carmodel.remove(0);
  }
  let value = carmake.value;
  let arrayCars = carsObject[value];
  arrayCars.forEach((item) => {
    options += `<option value='${item}'>${item}</option>`;
  });
  carmodel.innerHTML += options;
});

searchBtn.addEventListener("click", () => {
  hideElements();
  searchSection.classList.toggle("hidden");
});

let carsArray = [];
let number = 1;
search.addEventListener("click", () => {
  outputdiv.classList.add("hidden");
  soldOut.classList.add("hidden");
  loadingdiv.classList.remove("hidden");
  fetch(
    `https://api.api-ninjas.com/v1/cars?limit=${number}&model=${carmodel.value}&make=${carmake.value}&year=${caryear.value}`,
    {
      mode: "cors",
      headers: {
        "X-Api-Key": "XWObGPkMRUxsBT77UHX9Lw==MGfzNjCiSqFS2g3L"
      }
    }
  )
    .then((response) => response.json())
    .then((submit) => {
      carsArray = submit;
      if (carsArray.length == 0) {
        soldOut.classList.add("hidden");
        loadingdiv.classList.remove("hidden");
        output.classList.add("hidden");
        title.classList.add("hidden");
        icons.classList.add("hidden");
        outputdiv.classList.add("hidden");
        soldOut.innerHTML =
          "<h3>Sorry, this car is no longer available. Please try again later or search for another car</h3>";
        loadingdiv.classList.add("hidden");
        soldOut.classList.remove("hidden");
      } else {
        soldOut.classList.add("hidden");
        output.classList.add("hidden");
        title.classList.add("hidden");
        icons.classList.add("hidden");
        loadingdiv.classList.add("hidden");
        outputdiv.classList.add("hidden");
        loadingdiv.classList.remove("hidden");

        carsArray.forEach((car) => {
          if (
            car.year != caryear.value ||
            car.make != carmake.value ||
            car.model != carmodel.value
          ) {
            soldOut.classList.add("hidden");
            output.classList.add("hidden");
            title.classList.add("hidden");
            icons.classList.add("hidden");
            outputdiv.classList.add("hidden");
            soldOut.innerHTML =
              "<h3>Sorry, this car is no longer available. Please try again later or search for another car</h3>";
            loadingdiv.classList.add("hidden");
            soldOut.classList.remove("hidden");
          } else {
            body.textContent = `${car.class}`;
            cylinders.textContent = `${car.cylinders} cylinders`;
            mpg.textContent = `${car.city_mpg}/${car.highway_mpg}`;
            if (car.drive == "fwd") {
              drive.textContent = "Forward wheel drive";
            } else if (car.drive == "bwd") {
              drive.textContent = "Back wheel drive";
            } else {
              drive.textContent = "All wheel drive";
            }
            if (car.fuel_type == "gas") {
              fuel.textContent = "Gas";
            } else if (car.fuel_type == "electric") {
              fuel.textContent = "Electric";
            }
            if (car.transmission == "a") {
              transmission.textContent = "Automatic";
            } else {
              transmission.textContent = "Manual";
            }
            output.innerHTML = ` <img src="https://cdn.imagin.studio/getImage?&customer=usjohnfcompany&make=${car.make}&modelFamily=${car.model}&modelYear=${car.year}" alt="${car.year} ${car.make} ${car.model}" class="carReturn">`;
            title.innerHTML = `<h3>${car.year} ${car.make} ${car.model}</h3>`;
            loadingdiv.classList.add("hidden");
            output.classList.remove("hidden");
            title.classList.remove("hidden");
            icons.classList.remove("hidden");
            outputdiv.classList.remove("hidden");
          }
        });
      }
    })
    .catch((error) => console.log("Error while fetching:", error));
});
